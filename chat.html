<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Chat with AI</title>
</head>
<body>
  <h1>Chatbot</h1>
  <input id="msg" placeholder="Say something…" />
  <button id="send">Send</button>
  <pre id="out"></pre>

  <script>
    async function ask(msg){
      const r = await fetch("/chat", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({
          messages:[{role:"user", content: msg}],
          stream:false
        })
      });
      if(!r.ok) throw new Error(await r.text());
      const data = await r.json();
      return data.choices?.[0]?.message?.content ?? "(no reply)";
    }

    document.getElementById("send").onclick = async () => {
      const m = document.getElementById("msg").value || "Hello!";
      document.getElementById("out").textContent = "…thinking…";
      try {
        const text = await ask(m);
        document.getElementById("out").textContent = text;
      } catch(e) {
        document.getElementById("out").textContent = "Error: " + e.message;
      }
    };
  </script>
</body>
</html>
